// Archetype Compatibility Descriptions
// 为每对高兼容度原型提供生动有趣的配对解释

export interface CompatibilityDescription {
  description: string;
  highlight: string; // 核心亮点，简短版
}

// 配对解释矩阵：key格式为 "原型A_原型B"（按字母顺序排列确保一致性）
// 每个解释20-30字，描述各自特点+组合效果
export const compatibilityDescriptions: Record<string, CompatibilityDescription> = {
  // ========== 开心柯基的配对 ==========
  "开心柯基_太阳鸡": {
    description: "柯基的热情破冰瞬间点燃气氛，太阳鸡的温暖能量持续加热，两者合力让冷场变热场，整桌笑声不断。",
    highlight: "破冰+升温双引擎"
  },
  "开心柯基_夸夸豚": {
    description: "柯基负责活跃气氛让大家嗨起来，夸夸豚在旁边疯狂点赞鼓掌，形成正能量循环，让每个人都感到被认可。",
    highlight: "热场+鼓励循环"
  },
  "开心柯基_机智狐": {
    description: "柯基打开话匣子破冰开场，机智狐抛出新鲜话题和惊喜玩法，一个负责启动一个负责加料，聚会永不冷场。",
    highlight: "破冰+惊喜连连"
  },
  "开心柯基_淡定海豚": {
    description: "柯基的热情偶尔需要有人踩刹车，海豚优雅地调节节奏，让气氛既热烈又舒适，不会让人感到压力山大。",
    highlight: "热情+平衡节奏"
  },
  "开心柯基_织网蛛": {
    description: "柯基快速打破陌生感让大家熟络，织网蛛趁热打铁编织更深的关系网，从破冰到深交一气呵成。",
    highlight: "破冰→深度连接"
  },
  "开心柯基_暖心熊": {
    description: "柯基的热情破冰让气氛瞬间升温，暖心熊则在热场后接棒深度走心，完美实现从'嗨起来'到'聊进去'的无缝衔接。",
    highlight: "热场→走心衔接"
  },
  "开心柯基_灵感章鱼": {
    description: "柯基的活力感染全场，章鱼的脑洞创意让话题天马行空，两者碰撞出的火花让聚会充满意想不到的惊喜。",
    highlight: "活力+创意火花"
  },
  "开心柯基_沉思猫头鹰": {
    description: "柯基的热情能融化猫头鹰的严肃外壳，而猫头鹰偶尔抛出的深刻见解让热闹中多了几分思考的深度。",
    highlight: "热情融化深沉"
  },
  "开心柯基_定心大象": {
    description: "柯基在前面冲锋热场，大象在后方稳定局面，一个活跃气氛一个兜底，让聚会既热闹又安心。",
    highlight: "冲锋+稳定后方"
  },

  // ========== 太阳鸡的配对 ==========
  "太阳鸡_夸夸豚": {
    description: "太阳鸡输出温暖正能量，夸夸豚放大每一个闪光点，两个正能量发动机凑一起，整桌都被治愈了。",
    highlight: "双倍正能量场"
  },
  "太阳鸡_机智狐": {
    description: "太阳鸡提供稳定的温暖氛围作为安全基地，机智狐在这个基础上大胆探索新玩法，温暖中带着惊喜。",
    highlight: "温暖安全+探索惊喜"
  },
  "太阳鸡_淡定海豚": {
    description: "太阳鸡的正能量持续输出，海豚在旁边优雅调频，一个负责加热一个负责控温，让聚会氛围恰到好处。",
    highlight: "加热+控温完美配合"
  },
  "太阳鸡_织网蛛": {
    description: "太阳鸡营造温暖包容的氛围，织网蛛在这个舒适环境里编织关系网，让每个人都愿意敞开心扉。",
    highlight: "温暖氛围助力社交"
  },
  "太阳鸡_暖心熊": {
    description: "两个温暖系角色相遇，一个用阳光感染他人，一个用深度倾听治愈他人，整桌都沉浸在温馨的情感连接中。",
    highlight: "双重温暖治愈场"
  },
  "太阳鸡_灵感章鱼": {
    description: "太阳鸡的温暖包容让章鱼放心释放奇思妙想，不怕被嘲笑，创意在温暖的土壤里肆意生长。",
    highlight: "温暖包容创意"
  },
  "太阳鸡_定心大象": {
    description: "太阳鸡带来温暖的活力，大象提供稳定的安全感，两者叠加让整桌人都感到被照顾、被支持。",
    highlight: "温暖+安全双重buff"
  },

  // ========== 夸夸豚的配对 ==========
  "夸夸豚_机智狐": {
    description: "机智狐抛出新鲜想法，夸夸豚立刻送上掌声和彩虹屁，让探索者备受鼓舞，更敢于分享奇思妙想。",
    highlight: "创意+掌声激励"
  },
  "夸夸豚_淡定海豚": {
    description: "夸夸豚热情洋溢地给每个人加油，海豚在旁边保持优雅的节奏感，让鼓励既真诚又不会过于用力。",
    highlight: "热情鼓励+优雅节制"
  },
  "夸夸豚_织网蛛": {
    description: "夸夸豚让每个人都感到被认可，织网蛛趁机拉近大家的距离，被夸开心的人更愿意敞开心扉交朋友。",
    highlight: "认可感+社交粘合"
  },
  "夸夸豚_暖心熊": {
    description: "夸夸豚用语言鼓励他人，暖心熊用倾听温暖他人，两种不同的关怀方式让整桌人都感到被深深在乎。",
    highlight: "语言鼓励+倾听温暖"
  },
  "夸夸豚_灵感章鱼": {
    description: "章鱼的每个脑洞都能得到夸夸豚的热烈回应，这种被认可的感觉让创意源源不断，聊天变成头脑风暴。",
    highlight: "脑洞+掌声头脑风暴"
  },
  "夸夸豚_沉思猫头鹰": {
    description: "猫头鹰偶尔分享的深刻见解被夸夸豚大力赞赏，让沉默的思考者也愿意多开口，智慧得以被看见。",
    highlight: "鼓励深沉者开口"
  },
  "夸夸豚_定心大象": {
    description: "夸夸豚的鼓励让人充满信心，大象的稳定让人感到安心，双重加持下每个人都能做最好的自己。",
    highlight: "信心+安心双加持"
  },

  // ========== 机智狐的配对 ==========
  "机智狐_淡定海豚": {
    description: "机智狐不断抛出新鲜话题和玩法，海豚优雅地接住并调和，让探索既刺激又不失平衡。",
    highlight: "新鲜探索+优雅调和"
  },
  "机智狐_织网蛛": {
    description: "机智狐发现有趣的人和话题，织网蛛负责把大家串联起来，一个负责发现一个负责连接，社交效率翻倍。",
    highlight: "发现+连接效率翻倍"
  },
  "机智狐_暖心熊": {
    description: "机智狐带来新鲜刺激的话题，暖心熊提供温暖的倾听空间，让探索不只是好玩，还能触及内心。",
    highlight: "新鲜探索+走心深度"
  },
  "机智狐_灵感章鱼": {
    description: "机智狐带来新鲜玩法，灵感章鱼提供多线程创意，两者结合能产生更丰富的探索体验，激发无限可能。",
    highlight: "双创意无限可能"
  },
  "机智狐_沉思猫头鹰": {
    description: "机智狐的灵活探索遇上猫头鹰的深度思考，一个负责发现问题一个负责挖掘本质，聊天变得既好玩又有深度。",
    highlight: "灵活探索+深度思考"
  },
  "机智狐_定心大象": {
    description: "机智狐大胆探索新领域，大象在后方提供稳定支持，让冒险者知道有人兜底，更敢于尝试。",
    highlight: "大胆探索+稳定后盾"
  },

  // ========== 淡定海豚的配对 ==========
  "淡定海豚_织网蛛": {
    description: "海豚营造平衡舒适的氛围，织网蛛在这个环境里从容编织关系，两者配合让社交变得优雅而深入。",
    highlight: "舒适氛围+从容社交"
  },
  "淡定海豚_暖心熊": {
    description: "海豚调节着聚会的节奏，暖心熊提供情感的深度，两者让整桌既不会太闹也不会太闷，刚刚好。",
    highlight: "节奏平衡+情感深度"
  },
  "淡定海豚_灵感章鱼": {
    description: "章鱼的创意天马行空，海豚优雅地接住并引导讨论，让脑洞既能放飞又能落地。",
    highlight: "创意放飞+优雅落地"
  },
  "淡定海豚_沉思猫头鹰": {
    description: "海豚的平衡力让猫头鹰的深沉不显得格格不入，猫头鹰的洞察让海豚的调和更有方向。",
    highlight: "平衡+洞察互补"
  },
  "淡定海豚_定心大象": {
    description: "两个稳定型角色相遇，海豚负责调节氛围，大象负责稳定情绪，整桌人都感到无比安心。",
    highlight: "双稳定超级安心"
  },
  "淡定海豚_稳如龟": {
    description: "海豚不急不躁地调节节奏，乌龟慢条斯理地观察思考，两者让聚会有了从容不迫的高级感。",
    highlight: "从容节奏高级感"
  },
  "淡定海豚_隐身猫": {
    description: "海豚的温和不会给隐身猫压力，反而创造了一个安全的空间，让猫咪也愿意偶尔探出头来。",
    highlight: "温和无压安全空间"
  },

  // ========== 织网蛛的配对 ==========
  "织网蛛_暖心熊": {
    description: "织网蛛把人与人连接起来，暖心熊让这些连接变得温暖有深度，从认识到交心一步到位。",
    highlight: "连接+深度一步到位"
  },
  "织网蛛_灵感章鱼": {
    description: "织网蛛善于发现人与人的连接点，章鱼的创意让这些连接变得有趣，社交变成一场创意派对。",
    highlight: "社交连接+创意加持"
  },
  "织网蛛_沉思猫头鹰": {
    description: "织网蛛把不同的人拉到一起，猫头鹰在其中发现深层的共鸣点，让表面的连接升华为思想的交流。",
    highlight: "表面连接→思想交流"
  },
  "织网蛛_定心大象": {
    description: "织网蛛忙着连接每个人，大象在旁边稳稳地托底，让社交既活跃又有安全感。",
    highlight: "活跃社交+稳定托底"
  },
  "织网蛛_稳如龟": {
    description: "织网蛛主动出击建立连接，乌龟在深处提供真知灼见，一个负责广度一个负责深度。",
    highlight: "社交广度+思考深度"
  },
  "织网蛛_隐身猫": {
    description: "织网蛛温柔地把隐身猫也纳入关系网中，不强迫但持续关注，让内向的猫也能感受到被接纳。",
    highlight: "温柔纳入关系网"
  },

  // ========== 暖心熊的配对 ==========
  "暖心熊_灵感章鱼": {
    description: "暖心熊用深度倾听承接章鱼的奇思妙想，让创意不只是飘在空中，而是被真正理解和珍视。",
    highlight: "倾听承接创意"
  },
  "暖心熊_沉思猫头鹰": {
    description: "暖心熊的温暖能让猫头鹰放下防备，猫头鹰的深度洞察能让熊的倾听更有方向，两者的对话充满智慧与温情。",
    highlight: "温暖+智慧深度对话"
  },
  "暖心熊_定心大象": {
    description: "暖心熊提供情感上的温暖，大象提供心理上的安定，双重守护让整桌人都有被保护的感觉。",
    highlight: "温暖+安定双重守护"
  },
  "暖心熊_稳如龟": {
    description: "暖心熊耐心倾听，乌龟慢慢道来，两个不急不躁的角色创造出一个可以安心分享的深度空间。",
    highlight: "耐心深度分享空间"
  },
  "暖心熊_隐身猫": {
    description: "暖心熊的温柔不会让隐身猫感到压力，反而创造了一个安全的港湾，让猫愿意慢慢敞开心扉。",
    highlight: "安全港湾敞开心扉"
  },

  // ========== 灵感章鱼的配对 ==========
  "灵感章鱼_沉思猫头鹰": {
    description: "章鱼的创意火花四溅，猫头鹰用深度思考让这些火花落地生根，一个负责发散一个负责收敛，完美互补。",
    highlight: "创意发散+深度收敛"
  },
  "灵感章鱼_定心大象": {
    description: "章鱼的脑洞天马行空，大象稳稳地接住并提供落地支持，让创意既能飞得高也能站得稳。",
    highlight: "脑洞飞翔+稳定落地"
  },
  "灵感章鱼_稳如龟": {
    description: "章鱼快速抛出各种创意，乌龟慢慢品味其中的价值，快与慢的碰撞产生意想不到的化学反应。",
    highlight: "快创意+慢品味"
  },
  "灵感章鱼_隐身猫": {
    description: "章鱼的创意不需要隐身猫做出太多回应，猫的安静聆听本身就是最好的观众，让章鱼尽情发挥。",
    highlight: "尽情发挥+安静聆听"
  },

  // ========== 沉思猫头鹰的配对 ==========
  "沉思猫头鹰_定心大象": {
    description: "猫头鹰的深刻洞察需要一个稳定的倾听者，大象恰好提供这种安定的能量，让智慧得以被充分表达。",
    highlight: "深刻洞察+安定倾听"
  },
  "沉思猫头鹰_稳如龟": {
    description: "两个深度思考者相遇，猫头鹰从高处俯瞰，乌龟从深处观察，两种视角交汇产生惊人的洞见。",
    highlight: "俯瞰+深观双视角"
  },
  "沉思猫头鹰_隐身猫": {
    description: "猫头鹰的思考和隐身猫的观察都不需要太多言语，两者在沉默中达成某种默契，安静却深刻。",
    highlight: "沉默默契深刻连接"
  },

  // ========== 定心大象的配对 ==========
  "定心大象_稳如龟": {
    description: "大象的稳定和乌龟的从容相遇，整个场域都变得安心平和，让每个人都能放慢脚步享受当下。",
    highlight: "稳定+从容安心场域"
  },
  "定心大象_隐身猫": {
    description: "大象的安定能量让隐身猫感到无比安全，不需要表演不需要社交，只需要做自己就好。",
    highlight: "安全做自己"
  },

  // ========== 稳如龟的配对 ==========
  "稳如龟_隐身猫": {
    description: "乌龟和隐身猫都不急于表达，两者在慢节奏中找到舒适，偶尔的一句话都是经过深思的真心话。",
    highlight: "慢节奏真心交流"
  },
};

/**
 * 获取两个原型之间的配对解释
 * @param archetype1 原型1
 * @param archetype2 原型2
 * @returns 配对解释，如果没有则返回默认文字
 */
export function getCompatibilityDescription(
  archetype1: string,
  archetype2: string
): CompatibilityDescription {
  // 生成标准化的key（按字典序排列）
  const key = [archetype1, archetype2].sort().join("_");
  
  // 查找配对解释
  const description = compatibilityDescriptions[key];
  
  if (description) {
    return description;
  }
  
  // 默认解释
  return {
    description: `${archetype1}与${archetype2}各有独特魅力，在活动中能产生有趣的化学反应，期待你们的精彩碰撞。`,
    highlight: "独特化学反应"
  };
}

/**
 * 获取指定原型的所有高兼容度配对解释
 * @param archetype 当前原型
 * @param topMatches 最佳匹配列表（来自 getTopCompatibleArchetypes）
 * @returns 带解释的匹配列表
 */
export function getMatchesWithDescriptions(
  archetype: string,
  topMatches: Array<{ archetype: string; score: number }>
): Array<{ archetype: string; score: number; description: string; highlight: string }> {
  return topMatches.map(match => {
    const desc = getCompatibilityDescription(archetype, match.archetype);
    return {
      ...match,
      description: desc.description,
      highlight: desc.highlight
    };
  });
}
